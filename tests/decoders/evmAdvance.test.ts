import { describe, expect, it } from 'vitest';
import decodeEvmAdvance from '../../src/decoders/evmAdvance';

describe('Decoders', () => {
    describe('EvmAdvance Function', () => {
        it('should decode abi-encoded data', () => {
            const payload =
                '0x415bf3630000000000000000000000000000000000000000000000000000000000aa36a7000000000000000000000000ab7528bb862fb57e8a2bcd567a2e929a0be56a5e0000000000000000000000007ebf466b1ff554d3741902c13d8fb6622ed9c8e900000000000000000000000000000000000000000000000000000000006a91360000000000000000000000000000000000000000000000000000000067239744196649422815a660c8d483b4607d6383b215b73b5952ac41ac5ff169fb4023ce000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000c68656c6c6f20776f726c64210000000000000000000000000000000000000000';

            expect(decodeEvmAdvance(payload)).toEqual({
                appContract: '0xab7528bb862fB57E8A2BCd567a2e929a0Be56a5e',
                blockNumber: 6983990n,
                blockTimestamp: 1730385732n,
                chainId: 11155111n,
                index: 13n,
                msgSender: '0x7ebF466b1Ff554D3741902c13d8fB6622Ed9C8E9',
                payload: '0x68656c6c6f20776f726c6421',
                prevRandao:
                    11488545226250248578958987497403907144483976643748521380028803938489330574286n,
            });
        });
    });
});
